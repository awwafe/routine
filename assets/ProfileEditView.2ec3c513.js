import{u as L,i as y,o as l,b as d,d as a,t as m,e as o,f as c,w as r,_ as g,m as T,q as x,v as $,F as h,r as b,c as S,a as k,n as X}from"./index.334cbd32.js";import{C as V,D as A}from"./vue3-smooth-dnd.esm.b7e0057f.js";const j={class:"profile-edit-view"},G=k(" Back "),H={key:0},J=k("Cancel"),K={class:"profile-edit-view__task"},O=k("X"),Q=["onSubmit"],W=a("button",{type:"submit"},"Add Task",-1),Y={key:1},Z=["onSubmit"],ee=a("button",{type:"submit"},"Add Routine",-1),te=["onClick"],ae=["src"],ne={__name:"ProfileEditView",props:{profileId:String},setup(B){const E=B,u=L(),s=u.profiles.find(t=>t.id===parseInt(E.profileId)),n=y(null),_=y("");function D(t){n.value=t}function I(){n&&_.value.trim()&&(u.addTask(s,n.value,_.value.trim()),_.value="")}function N(t,i){window.confirm(`Are you sure you want to delete the ${i.label} task?`)&&u.deleteTask(s,t,i)}const f=y("");function U(){f.value.trim()&&(u.addRoutine(s,f.value.trim()),f.value="")}const F="/routine/",M=["avatar-1.svg","avatar-2.svg","avatar-3.svg","avatar-4.svg","avatar-5.png","avatar-6.png","avatar-7.svg","avatar-8.svg","avatar-9.svg","avatar-10.svg","avatar-11.svg","avatar-12.svg","avatar-13.svg","avatar-14.svg","avatar-15.png"].map(t=>({img:t,src:`${F}avatars/${t}`}));function P(t){u.selectAvatar(s,t)}function q(t){s.routines=C(s.routines,t),u.saveRoutines()}function z(t){n.value.tasks=C(n.value.tasks,t),u.saveRoutines()}function C(t,i){const{removedIndex:v,addedIndex:e,payload:p}=i;if(v===null&&e===null)return t;const w=[...t];let R=p;return v!==null&&(R=w.splice(v,1)[0]),e!==null&&w.splice(e,0,R),w}return(t,i)=>{var v;return l(),d("div",j,[a("h1",null,"Editing "+m((v=o(s))==null?void 0:v.name),1),c(g,{to:"/settings"},{default:r(()=>[G]),_:1}),n.value?(l(),d("div",H,[a("h2",null," Editing "+m(n.value.name),1),c(g,{onDelayClick:i[0]||(i[0]=e=>D())},{default:r(()=>[J]),_:1}),c(o(V),{class:"profile-edit-view__item-list",orientation:"vertical",onDrop:z},{default:r(()=>[(l(!0),d(h,null,b(n.value.tasks,e=>(l(),S(o(A),{key:e.label,class:"profile-edit-view__item"},{default:r(()=>[a("span",K,m(e.label),1),c(g,{onDelayClick:p=>N(n.value,e)},{default:r(()=>[O]),_:2},1032,["onDelayClick"])]),_:2},1024))),128))]),_:1}),a("div",null,[a("form",{novalidate:"",onSubmit:T(I,["prevent"])},[x(a("input",{"onUpdate:modelValue":i[1]||(i[1]=e=>_.value=e)},null,512),[[$,_.value]]),W],40,Q)])])):(l(),d("div",Y,[c(o(V),{class:"profile-edit-view__item-list",orientation:"vertical",onDrop:q},{default:r(()=>[(l(!0),d(h,null,b(o(s).routines,e=>(l(),S(o(A),{key:e.id,class:"profile-edit-view__item"},{default:r(()=>[c(g,{theme:"flat,white",onDelayClick:p=>D(e)},{default:r(()=>[k(m(e.name),1)]),_:2},1032,["onDelayClick"])]),_:2},1024))),128))]),_:1}),a("div",null,[a("form",{novalidate:"",onSubmit:T(U,["prevent"])},[x(a("input",{"onUpdate:modelValue":i[2]||(i[2]=e=>f.value=e)},null,512),[[$,f.value]]),ee],40,Z)]),a("div",null,[(l(!0),d(h,null,b(o(M),e=>(l(),d("div",{class:X(["profile-edit-view__avatar-frame",{"is-selected":o(s).avatar===e.img}]),key:e.img,onClick:p=>P(e.img)},[a("img",{class:"profile-edit-view__avatar",src:e.src},null,8,ae)],10,te))),128))])]))])}}};export{ne as default};
