import{o as l,d as r,F as x,r as w,e as u,n as W,p as j,h as S,c as R,f as v,v as X,j as O,t as k,u as B,b as q,w as h,g as _,_ as $,a as D,q as G,x as H}from"./index.6a83bee4.js";import{C as J,_ as K,D as Q}from"./vue3-smooth-dnd.esm.ebd458ed.js";import{V as Y,_ as Z}from"./VDialog.f3d5153d.js";import"./_commonjsHelpers.4e997714.js";const ee={class:"colour-select"},te=["onClick"],ae={__name:"ColourSelect",props:{selected:{required:!0}},emits:["select"],setup(o,{emit:f}){const i=["#ace9dd","#b5efcd","#b7dbf4","#ddc5e7","#b9bfc7","#faeca7","#f2ceab","#f8c2ba"];function c(a){f("select",a)}return(a,e)=>(l(),r("div",ee,[(l(),r(x,null,w(i,n=>u("div",{key:n,class:j(["colour-select__frame no-highlights",{"is-selected":n===o.selected}]),onClick:s=>c(n)},[u("div",{class:"colour-select__colour",style:W(`background: ${n}`)},null,4)],10,te)),64))]))}};const se={class:"check-select"},le=["onClick"],oe={__name:"CheckSelect",props:{selected:{required:!0}},emits:["select"],setup(o,{emit:f}){const i="/routine/",c=S(["check-1.json","check-2.json","check-3.json","check-4.json","check-5.json","check-6.json","check-7.json","check-8.json","check-9.json","check-10.json","check-11.json"].map(e=>({img:e,src:`${i}checks/${e}`,loop:1})));function a(e){e.loop+=1,f("select",e.img)}return(e,n)=>(l(),r("div",se,[(l(!0),r(x,null,w(c.value,s=>(l(),r("div",{class:j(["check-select__frame no-highlights",{"is-selected":o.selected===s.img}]),key:s.img,onClick:C=>a(s)},[(l(),R(v(Y),{class:"check-select__check",key:`${s.img}-${s.loop}`,animationLink:s.src,height:80,width:80,loop:!1},null,8,["animationLink"]))],10,le))),128))]))}};const ne={class:"avatar-select"},ie=["onClick"],ce=["src"],re={__name:"AvatarSelect",props:{selected:{required:!0}},emits:["select"],setup(o,{emit:f}){const i="/routine/",c=["avatar-1.svg","avatar-2.svg","avatar-3.svg","avatar-4.svg","avatar-5.png","avatar-6.png","avatar-7.svg","avatar-8.svg","avatar-9.svg","avatar-10.svg","avatar-11.svg","avatar-12.svg","avatar-13.svg","avatar-14.svg","avatar-15.png"].map(e=>({img:e,src:`${i}avatars/${e}`}));function a(e){f("select",e.img)}return(e,n)=>(l(),r("div",ne,[(l(!0),r(x,null,w(v(c),s=>(l(),r("div",{class:j(["avatar-select__frame no-highlights",{"is-selected":o.selected===s.img}]),key:s.img,onClick:C=>a(s)},[u("img",{class:"avatar-select__avatar",src:s.src},null,8,ce)],10,ie))),128))]))}};const ue=["aria-checked","aria-disabled","aria-label","aria-readonly"],de={class:"m-toggle__label"},_e={__name:"VToggle",props:{activeColor:{type:String,default:"#9FD6AE"},disabled:{type:Boolean,default:!1},title:{type:String,required:!0},modelValue:{type:Boolean,default:!1}},emits:["toggle","update:modelValue"],setup(o,{emit:f}){const i=o;X(e=>({"7b672efa":o.activeColor}));const c=S(i.modelValue);O(()=>i.modelValue,e=>{c.value=e});function a(){i.disabled||(c.value=!c.value,f("update:modelValue",c.value))}return(e,n)=>(l(),r("section",{class:j([{"m-toggle--is-disabled":o.disabled},"m-toggle"]),onClick:a},[u("span",{"aria-checked":c.value,"aria-disabled":o.disabled,"aria-label":o.title,"aria-readonly":o.disabled,class:j(["m-toggle__content",{"m-toggle__content--active":c.value}]),role:"checkbox"},null,10,ue),u("label",de,k(o.title),1)],2))}};const ve={class:"task-options-dialog__title"},fe={class:"task-options-dialog__content"},me={class:"task-options-dialog__toggle-list"},pe=D(" Save "),ge={__name:"TaskOptionsDialog",props:{open:Boolean,profile:Object,routine:Object,task:Object},emits:["close"],setup(o,{emit:f}){const i=o,c=B(),a=S([["Sunday",!1],["Monday",!1],["Tuesday",!1],["Wednesday",!1],["Thursday",!1],["Friday",!1],["Saturday",!1]]),e=q(()=>{const m=[];return a.value.forEach((y,p)=>{y[1]&&m.push(p)}),m});O(()=>i.open,m=>{m&&n()}),n();function n(){const m=!i.task.days.length;a.value.forEach((y,p)=>{y[1]=m||i.task.days.includes(p)})}function s(){f("close")}function C(){setTimeout(()=>{e.value.length===7?i.task.days=[]:i.task.days=e.value,c.saveRoutines(),s()},300)}return(m,y)=>(l(),R(Z,{class:"task-options-dialog",open:i.open,onClose:s},{default:h(()=>[u("div",ve,k(o.task.label)+" in "+k(o.profile.name)+"'s "+k(o.routine.name)+" Routine ",1),u("div",fe,[u("div",me,[(l(!0),r(x,null,w(a.value,p=>(l(),R(_e,{key:p[0],title:p[0],modelValue:p[1],"onUpdate:modelValue":E=>p[1]=E},null,8,["title","modelValue","onUpdate:modelValue"]))),128))]),_($,{onClick:C},{default:h(()=>[pe]),_:1})])]),_:1},8,["open"]))}};const he={class:"profile-edit-view"},ke={key:0},ye=D(" Done "),be={class:"profile-edit-view__task-label"},Ce={class:"profile-edit-view__task-days"},$e=D("X"),Se=["onSubmit"],Ve=D("Add Task"),Te={key:1},xe=D(" Done "),we={class:"profile-edit-view__item-list"},Ae={__name:"ProfileEditView",props:{profileId:String},setup(o){const f=o,i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function c(t){const g=[];return t.days.length?t.days.forEach(b=>{g.push(i[b])}):g.push("Every Day"),g.join(", ")}const a=B(),e=a.profiles.find(t=>t.id===parseInt(f.profileId)),n=S(null),s=S(""),C=S(!1),m=S(null),y=q(()=>{const t=n.value&&e.routines.find(g=>g.id===n.value.id);return t||{tasks:[]}});function p(t){m.value=t,C.value=!0}function E(){C.value=!1}function F(t){n.value=t}function I(){n&&s.value.trim()&&(a.addTask(e,n.value,s.value.trim()),s.value="")}function U(t){a.deleteTask(e,n.value,t)}function L(t){e.check=t,a.saveRoutines()}function N(t){e.colour=t,a.saveRoutines()}function M(t){e.avatar=t,a.saveRoutines()}function P(t){y.value.tasks=z(y.value.tasks,t),a.saveRoutines()}function z(t,g){const{removedIndex:b,addedIndex:V,payload:d}=g;if(b===null&&V===null)return t;const T=[...t];let A=d;return b!==null&&(A=T.splice(b,1)[0]),V!==null&&T.splice(V,0,A),T}return(t,g)=>{var b,V;return l(),r("div",he,[n.value?(l(),r("div",ke,[u("h1",null," Editing "+k((b=v(e))==null?void 0:b.name)+"'s "+k(n.value.name)+" Routine ",1),_($,{to:"/"},{default:h(()=>[ye]),_:1}),_(v(J),{class:"profile-edit-view__item-list",orientation:"vertical","drag-begin-delay":200,onDrop:P},{default:h(()=>[(l(!0),r(x,null,w(v(y).tasks,d=>(l(),R(v(Q),{key:d.id,class:"profile-edit-view__item"},{default:h(()=>[_($,{theme:"flat,white",onClick:T=>p(d)},{default:h(()=>[u("div",be,k(d.name),1),u("div",Ce,k(c(d)),1)]),_:2},1032,["onClick"]),_($,{delay:"false",onClick:T=>U(d)},{default:h(()=>[$e]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),u("div",null,[u("form",{novalidate:"",onSubmit:G(I,["prevent"])},[_(K,{modelValue:s.value,"onUpdate:modelValue":g[0]||(g[0]=d=>s.value=d),class:"profile-edit-view__input"},null,8,["modelValue"]),_($,{delay:"false",type:"submit"},{default:h(()=>[Ve]),_:1})],40,Se)]),m.value?(l(),R(ge,{key:0,open:C.value,profile:v(e),routine:n.value,task:m.value,onClose:E},null,8,["open","profile","routine","task"])):H("",!0)])):(l(),r("div",Te,[u("h1",null,"Editing "+k((V=v(e))==null?void 0:V.name),1),_($,{to:"/"},{default:h(()=>[xe]),_:1}),u("div",we,[(l(!0),r(x,null,w(v(a).routines,d=>(l(),r("div",{key:d.id,class:"profile-edit-view__item"},[_($,{theme:"flat,white",onClick:T=>F(d)},{default:h(()=>[D(k(d.name),1)]),_:2},1032,["onClick"])]))),128))]),_(oe,{selected:v(e).check,onSelect:L},null,8,["selected"]),_(ae,{selected:v(e).colour,onSelect:N},null,8,["selected"]),_(re,{selected:v(e).avatar,onSelect:M},null,8,["selected"])]))])}}};export{Ae as default};
