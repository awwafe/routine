import{u as M,i as w,o as r,b as v,d as n,t as k,e as u,f as a,w as i,_ as c,m as $,F as h,r as C,c as T,a as _,n as j}from"./index.f2784ce9.js";import{C as D,_ as x,D as S}from"./vue3-smooth-dnd.esm.5da45fa0.js";const q={class:"profile-edit-view"},G={key:0},H={style:{display:"inline-block"}},J=_("Cancel"),K={class:"profile-edit-view__task"},O=_("X"),Q=["onSubmit"],W=_("Add Task"),Y={key:1},Z=_(" Back "),ee=_("X"),te=["onSubmit"],ae=_("Add Routine"),ie=["onClick"],le=["src"],oe={__name:"ProfileEditView",props:{profileId:String},setup(A){const B=A,d=M(),l=d.profiles.find(t=>t.id===parseInt(B.profileId)),o=w(null),m=w("");function b(t){o.value=t}function E(){o&&m.value.trim()&&(d.addTask(l,o.value,m.value.trim()),m.value="")}function I(t,s){d.deleteTask(l,t,s)}const p=w("");function N(){p.value.trim()&&(d.addRoutine(l,p.value.trim()),p.value="")}function U(t){window.confirm(`Are you sure you want to delete the ${t.name} routine?`)&&d.deleteRoutine(l,t)}const F="/routine/",P=["avatar-1.svg","avatar-2.svg","avatar-3.svg","avatar-4.svg","avatar-5.png","avatar-6.png","avatar-7.svg","avatar-8.svg","avatar-9.svg","avatar-10.svg","avatar-11.svg","avatar-12.svg","avatar-13.svg","avatar-14.svg","avatar-15.png"].map(t=>({img:t,src:`${F}avatars/${t}`}));function X(t){d.selectAvatar(l,t)}function z(t){l.routines=R(l.routines,t),d.saveRoutines()}function L(t){o.value.tasks=R(o.value.tasks,t),d.saveRoutines()}function R(t,s){const{removedIndex:f,addedIndex:e,payload:g}=s;if(f===null&&e===null)return t;const y=[...t];let V=g;return f!==null&&(V=y.splice(f,1)[0]),e!==null&&y.splice(e,0,V),y}return(t,s)=>{var f;return r(),v("div",q,[n("h1",null,"Editing "+k((f=u(l))==null?void 0:f.name),1),o.value?(r(),v("div",G,[n("div",null,[n("h2",H," Editing "+k(o.value.name)+" routine\xA0 ",1),a(c,{onClick:s[0]||(s[0]=e=>b())},{default:i(()=>[J]),_:1})]),a(u(D),{class:"profile-edit-view__item-list",orientation:"vertical",onDrop:L},{default:i(()=>[(r(!0),v(h,null,C(o.value.tasks,e=>(r(),T(u(S),{key:e.label,class:"profile-edit-view__item"},{default:i(()=>[n("span",K,k(e.label),1),a(c,{delay:"false",onClick:g=>I(o.value,e)},{default:i(()=>[O]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),n("div",null,[n("form",{novalidate:"",onSubmit:$(E,["prevent"])},[a(x,{modelValue:m.value,"onUpdate:modelValue":s[1]||(s[1]=e=>m.value=e)},null,8,["modelValue"]),a(c,{delay:"false",type:"submit"},{default:i(()=>[W]),_:1})],40,Q)])])):(r(),v("div",Y,[a(c,{to:"/settings"},{default:i(()=>[Z]),_:1}),a(u(D),{class:"profile-edit-view__item-list",orientation:"vertical",onDrop:z},{default:i(()=>[(r(!0),v(h,null,C(u(l).routines,e=>(r(),T(u(S),{key:e.id,class:"profile-edit-view__item"},{default:i(()=>[a(c,{theme:"flat,white",onClick:g=>b(e)},{default:i(()=>[_(k(e.name),1)]),_:2},1032,["onClick"]),a(c,{delay:"false",onClick:g=>U(e)},{default:i(()=>[ee]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),n("div",null,[n("form",{novalidate:"",onSubmit:$(N,["prevent"])},[a(x,{modelValue:p.value,"onUpdate:modelValue":s[2]||(s[2]=e=>p.value=e)},null,8,["modelValue"]),a(c,{delay:"false",type:"submit"},{default:i(()=>[ae]),_:1})],40,te)]),n("div",null,[(r(!0),v(h,null,C(u(P),e=>(r(),v("div",{class:j(["profile-edit-view__avatar-frame",{"is-selected":u(l).avatar===e.img}]),key:e.img,onClick:g=>X(e.img)},[n("img",{class:"profile-edit-view__avatar",src:e.src},null,8,le)],10,ie))),128))])]))])}}};export{oe as default};
