import{o as n,b as r,F as w,r as S,d as _,m as X,n as D,h as x,c as R,e as u,u as M,t as b,f as c,w as d,_ as h,p as E,a as g}from"./index.b46e1bfc.js";import{C as I,_ as B,D as L}from"./vue3-smooth-dnd.esm.931f51df.js";import{V as G}from"./vue3-lottie.es.ed9e6778.js";import"./_commonjsHelpers.4e997714.js";const H={class:"colour-select"},J=["onClick"],K={__name:"ColourSelect",props:{selected:{type:String,required:!0}},emits:["select"],setup(m,{emit:p}){const l=["#ace9dd","#b5efcd","#b7dbf4","#ddc5e7","#b9bfc7","#faeca7","#f2ceab","#f8c2ba"];function t(a){p("select",a)}return(a,s)=>(n(),r("div",H,[(n(),r(w,null,S(l,v=>_("div",{key:v,class:D(["colour-select__frame no-highlights",{"is-selected":v===m.selected}]),onClick:o=>t(v)},[_("div",{class:"colour-select__colour",style:X(`background: ${v}`)},null,4)],10,J)),64))]))}};const O={class:"check-select"},Q=["onClick"],W={__name:"CheckSelect",props:{selected:{type:String,required:!0}},emits:["select"],setup(m,{emit:p}){const l="/routine/",t=x(["check-1.json","check-2.json"].map(s=>({img:s,src:`${l}checks/${s}`,loop:1})));function a(s){s.loop+=1,p("select",s.img)}return(s,v)=>(n(),r("div",O,[(n(!0),r(w,null,S(t.value,o=>(n(),r("div",{class:D(["check-select__frame no-highlights",{"is-selected":m.selected===o.img}]),key:o.img,onClick:V=>a(o)},[(n(),R(u(G),{class:"check-select__check",key:`${o.img}-${o.loop}`,animationLink:o.src,height:80,width:80,loop:!1},null,8,["animationLink"]))],10,Q))),128))]))}};const Y={class:"avatar-select"},Z=["onClick"],ee=["src"],te={__name:"AvatarSelect",props:{selected:{type:String,required:!0}},emits:["select"],setup(m,{emit:p}){const l="/routine/",t=["avatar-1.svg","avatar-2.svg","avatar-3.svg","avatar-4.svg","avatar-5.png","avatar-6.png","avatar-7.svg","avatar-8.svg","avatar-9.svg","avatar-10.svg","avatar-11.svg","avatar-12.svg","avatar-13.svg","avatar-14.svg","avatar-15.png"].map(s=>({img:s,src:`${l}avatars/${s}`}));function a(s){p("select",s.img)}return(s,v)=>(n(),r("div",Y,[(n(!0),r(w,null,S(u(t),o=>(n(),r("div",{class:D(["avatar-select__frame no-highlights",{"is-selected":m.selected===o.img}]),key:o.img,onClick:V=>a(o)},[_("img",{class:"avatar-select__avatar",src:o.src},null,8,ee)],10,Z))),128))]))}};const se={class:"profile-edit-view"},le={key:0},ae=g(" Done "),ne={class:"profile-edit-view__task"},oe=g("X"),ie=["onSubmit"],ce=g("Add Task"),re={key:1},ue=g(" Done "),de=g("X"),_e=["onSubmit"],ve=g("Add Routine"),ge={__name:"ProfileEditView",props:{profileId:String},setup(m){const p=m,l=M(),t=l.profiles.find(e=>e.id===parseInt(p.profileId)),a=x(null),s=x("");function v(e){a.value=e}function o(){a&&s.value.trim()&&(l.addTask(t,a.value,s.value.trim()),s.value="")}function V(e,f){l.deleteTask(t,e,f)}const $=x("");function U(){$.value.trim()&&(l.addRoutine(t,$.value.trim()),$.value="")}function q(e){window.confirm(`Are you sure you want to delete the ${e.name} routine?`)&&l.deleteRoutine(t,e)}function N(e){l.selectCheck(t,e)}function j(e){l.selectColour(t,e)}function z(e){l.selectAvatar(t,e)}function F(e){t.routines=A(t.routines,e),l.saveRoutines()}function P(e){a.value.tasks=A(a.value.tasks,e),l.saveRoutines()}function A(e,f){const{removedIndex:k,addedIndex:y,payload:i}=f;if(k===null&&y===null)return e;const C=[...e];let T=i;return k!==null&&(T=C.splice(k,1)[0]),y!==null&&C.splice(y,0,T),C}return(e,f)=>{var k,y;return n(),r("div",se,[a.value?(n(),r("div",le,[_("h1",null," Editing "+b((k=u(t))==null?void 0:k.name)+"'s "+b(a.value.name)+" routine ",1),c(h,{to:"/"},{default:d(()=>[ae]),_:1}),c(u(I),{class:"profile-edit-view__item-list",orientation:"vertical",onDrop:P},{default:d(()=>[(n(!0),r(w,null,S(a.value.tasks,i=>(n(),R(u(L),{key:i.label,class:"profile-edit-view__item"},{default:d(()=>[_("span",ne,b(i.label),1),c(h,{delay:"false",onClick:C=>V(a.value,i)},{default:d(()=>[oe]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),_("div",null,[_("form",{novalidate:"",onSubmit:E(o,["prevent"])},[c(B,{modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=i=>s.value=i),class:"profile-edit-view__input"},null,8,["modelValue"]),c(h,{delay:"false",type:"submit"},{default:d(()=>[ce]),_:1})],40,ie)])])):(n(),r("div",re,[_("h1",null,"Editing "+b((y=u(t))==null?void 0:y.name),1),c(h,{to:"/"},{default:d(()=>[ue]),_:1}),c(u(I),{class:"profile-edit-view__item-list",orientation:"vertical",onDrop:F},{default:d(()=>[(n(!0),r(w,null,S(u(t).routines,i=>(n(),R(u(L),{key:i.id,class:"profile-edit-view__item"},{default:d(()=>[c(h,{theme:"flat,white",onClick:C=>v(i)},{default:d(()=>[g(b(i.name),1)]),_:2},1032,["onClick"]),c(h,{delay:"false",onClick:C=>q(i)},{default:d(()=>[de]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),_("div",null,[_("form",{novalidate:"",onSubmit:E(U,["prevent"])},[c(B,{modelValue:$.value,"onUpdate:modelValue":f[1]||(f[1]=i=>$.value=i),class:"profile-edit-view__input"},null,8,["modelValue"]),c(h,{delay:"false",type:"submit"},{default:d(()=>[ve]),_:1})],40,_e)]),c(W,{selected:u(t).check,onSelect:N},null,8,["selected"]),c(K,{selected:u(t).colour,onSelect:j},null,8,["selected"]),c(te,{selected:u(t).avatar,onSelect:z},null,8,["selected"])]))])}}};export{ge as default};
