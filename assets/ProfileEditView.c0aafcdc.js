import{u as M,i as h,o as n,b as c,d as o,t as w,e as r,f as i,w as l,_,m as V,F as y,r as C,c as D,a as f,n as j}from"./index.b0592b88.js";import{C as T,_ as $,D as x}from"./vue3-smooth-dnd.esm.6619c002.js";const q={class:"profile-edit-view"},G={key:0},H=f(" Done "),J={class:"profile-edit-view__task"},K=f("X"),O=["onSubmit"],Q=f("Add Task"),W={key:1},Y=f(" Done "),Z=f("X"),ee=["onSubmit"],te=f("Add Routine"),ae=["onClick"],ie=["src"],ne={__name:"ProfileEditView",props:{profileId:String},setup(S){const A=S,u=M(),a=u.profiles.find(e=>e.id===parseInt(A.profileId)),s=h(null),g=h("");function E(e){s.value=e}function I(){s&&g.value.trim()&&(u.addTask(a,s.value,g.value.trim()),g.value="")}function B(e,d){u.deleteTask(a,e,d)}const k=h("");function N(){k.value.trim()&&(u.addRoutine(a,k.value.trim()),k.value="")}function U(e){window.confirm(`Are you sure you want to delete the ${e.name} routine?`)&&u.deleteRoutine(a,e)}const F="/routine/",P=["avatar-1.svg","avatar-2.svg","avatar-3.svg","avatar-4.svg","avatar-5.png","avatar-6.png","avatar-7.svg","avatar-8.svg","avatar-9.svg","avatar-10.svg","avatar-11.svg","avatar-12.svg","avatar-13.svg","avatar-14.svg","avatar-15.png"].map(e=>({img:e,src:`${F}avatars/${e}`}));function X(e){u.selectAvatar(a,e)}function z(e){a.routines=R(a.routines,e),u.saveRoutines()}function L(e){s.value.tasks=R(s.value.tasks,e),u.saveRoutines()}function R(e,d){const{removedIndex:m,addedIndex:p,payload:t}=d;if(m===null&&p===null)return e;const v=[...e];let b=t;return m!==null&&(b=v.splice(m,1)[0]),p!==null&&v.splice(p,0,b),v}return(e,d)=>{var m,p;return n(),c("div",q,[s.value?(n(),c("div",G,[o("h1",null," Editing "+w((m=r(a))==null?void 0:m.name)+"'s "+w(s.value.name)+" routine ",1),i(_,{to:"/"},{default:l(()=>[H]),_:1}),i(r(T),{class:"profile-edit-view__item-list",orientation:"vertical",onDrop:L},{default:l(()=>[(n(!0),c(y,null,C(s.value.tasks,t=>(n(),D(r(x),{key:t.label,class:"profile-edit-view__item"},{default:l(()=>[o("span",J,w(t.label),1),i(_,{delay:"false",onClick:v=>B(s.value,t)},{default:l(()=>[K]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),o("div",null,[o("form",{novalidate:"",onSubmit:V(I,["prevent"])},[i($,{modelValue:g.value,"onUpdate:modelValue":d[0]||(d[0]=t=>g.value=t)},null,8,["modelValue"]),i(_,{delay:"false",type:"submit"},{default:l(()=>[Q]),_:1})],40,O)])])):(n(),c("div",W,[o("h1",null,"Editing "+w((p=r(a))==null?void 0:p.name),1),i(_,{to:"/"},{default:l(()=>[Y]),_:1}),i(r(T),{class:"profile-edit-view__item-list",orientation:"vertical",onDrop:z},{default:l(()=>[(n(!0),c(y,null,C(r(a).routines,t=>(n(),D(r(x),{key:t.id,class:"profile-edit-view__item"},{default:l(()=>[i(_,{theme:"flat,white",onClick:v=>E(t)},{default:l(()=>[f(w(t.name),1)]),_:2},1032,["onClick"]),i(_,{delay:"false",onClick:v=>U(t)},{default:l(()=>[Z]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),o("div",null,[o("form",{novalidate:"",onSubmit:V(N,["prevent"])},[i($,{modelValue:k.value,"onUpdate:modelValue":d[1]||(d[1]=t=>k.value=t)},null,8,["modelValue"]),i(_,{delay:"false",type:"submit"},{default:l(()=>[te]),_:1})],40,ee)]),o("div",null,[(n(!0),c(y,null,C(r(P),t=>(n(),c("div",{class:j(["profile-edit-view__avatar-frame",{"is-selected":r(a).avatar===t.img}]),key:t.img,onClick:v=>X(t.img)},[o("img",{class:"profile-edit-view__avatar",src:t.src},null,8,ie)],10,ae))),128))])]))])}}};export{ne as default};
