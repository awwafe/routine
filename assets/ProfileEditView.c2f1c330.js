import{o,b as _,F as D,r as j,d as r,n as Q,p as A,g as C,c as x,e as f,v as Y,j as L,t as k,u as N,h as Z,w as v,f as d,_ as y,a as $,q as U,x as ee}from"./index.ee5d9c8a.js";import{C as q,_ as F,D as I}from"./vue3-smooth-dnd.esm.6ea3abe3.js";import{V as te,_ as ae}from"./VDialog.07853228.js";import"./_commonjsHelpers.4e997714.js";const le={class:"colour-select"},se=["onClick"],oe={__name:"ColourSelect",props:{selected:{required:!0}},emits:["select"],setup(n,{emit:p}){const i=["#ace9dd","#b5efcd","#b7dbf4","#ddc5e7","#b9bfc7","#faeca7","#f2ceab","#f8c2ba"];function c(a){p("select",a)}return(a,e)=>(o(),_("div",le,[(o(),_(D,null,j(i,l=>r("div",{key:l,class:A(["colour-select__frame no-highlights",{"is-selected":l===n.selected}]),onClick:s=>c(l)},[r("div",{class:"colour-select__colour",style:Q(`background: ${l}`)},null,4)],10,se)),64))]))}};const ne={class:"check-select"},ie=["onClick"],ce={__name:"CheckSelect",props:{selected:{required:!0}},emits:["select"],setup(n,{emit:p}){const i="/routine/",c=C(["check-1.json","check-2.json","check-3.json","check-4.json","check-5.json","check-6.json","check-7.json","check-8.json","check-9.json","check-10.json","check-11.json"].map(e=>({img:e,src:`${i}checks/${e}`,loop:1})));function a(e){e.loop+=1,p("select",e.img)}return(e,l)=>(o(),_("div",ne,[(o(!0),_(D,null,j(c.value,s=>(o(),_("div",{class:A(["check-select__frame no-highlights",{"is-selected":n.selected===s.img}]),key:s.img,onClick:S=>a(s)},[(o(),x(f(te),{class:"check-select__check",key:`${s.img}-${s.loop}`,animationLink:s.src,height:80,width:80,loop:!1},null,8,["animationLink"]))],10,ie))),128))]))}};const ue={class:"avatar-select"},de=["onClick"],re=["src"],_e={__name:"AvatarSelect",props:{selected:{required:!0}},emits:["select"],setup(n,{emit:p}){const i="/routine/",c=["avatar-1.svg","avatar-2.svg","avatar-3.svg","avatar-4.svg","avatar-5.png","avatar-6.png","avatar-7.svg","avatar-8.svg","avatar-9.svg","avatar-10.svg","avatar-11.svg","avatar-12.svg","avatar-13.svg","avatar-14.svg","avatar-15.png"].map(e=>({img:e,src:`${i}avatars/${e}`}));function a(e){p("select",e.img)}return(e,l)=>(o(),_("div",ue,[(o(!0),_(D,null,j(f(c),s=>(o(),_("div",{class:A(["avatar-select__frame no-highlights",{"is-selected":n.selected===s.img}]),key:s.img,onClick:S=>a(s)},[r("img",{class:"avatar-select__avatar",src:s.src},null,8,re)],10,de))),128))]))}};const ve=["aria-checked","aria-disabled","aria-label","aria-readonly"],fe={class:"m-toggle__label"},me={__name:"VToggle",props:{activeColor:{type:String,default:"#9FD6AE"},disabled:{type:Boolean,default:!1},title:{type:String,required:!0},modelValue:{type:Boolean,default:!1}},emits:["toggle","update:modelValue"],setup(n,{emit:p}){const i=n;Y(e=>({"7b672efa":n.activeColor}));const c=C(i.modelValue);L(()=>i.modelValue,e=>{c.value=e});function a(){i.disabled||(c.value=!c.value,p("update:modelValue",c.value))}return(e,l)=>(o(),_("section",{class:A([{"m-toggle--is-disabled":n.disabled},"m-toggle"]),onClick:a},[r("span",{"aria-checked":c.value,"aria-disabled":n.disabled,"aria-label":n.title,"aria-readonly":n.disabled,class:A(["m-toggle__content",{"m-toggle__content--active":c.value}]),role:"checkbox"},null,10,ve),r("label",fe,k(n.title),1)],2))}};const pe={class:"task-options-dialog__title"},ge={class:"task-options-dialog__content"},he={class:"task-options-dialog__toggle-list"},ke=$(" Save "),ye={__name:"TaskOptionsDialog",props:{open:Boolean,profile:Object,routine:Object,task:Object},emits:["close"],setup(n,{emit:p}){const i=n,c=N(),a=C([["Sunday",!1],["Monday",!1],["Tuesday",!1],["Wednesday",!1],["Thursday",!1],["Friday",!1],["Saturday",!1]]),e=Z(()=>{const g=[];return a.value.forEach((w,h)=>{w[1]&&g.push(h)}),g});L(()=>i.open,g=>{g&&l()}),l();function l(){const g=!i.task.days.length;a.value.forEach((w,h)=>{w[1]=g||i.task.days.includes(h)})}function s(){p("close")}function S(){setTimeout(()=>{e.value.length===7?i.task.days=[]:i.task.days=e.value,c.saveRoutines(),s()},300)}return(g,w)=>(o(),x(ae,{class:"task-options-dialog",open:i.open,onClose:s},{default:v(()=>[r("div",pe,k(n.task.label)+" in "+k(n.profile.name)+"'s "+k(n.routine.name)+" Routine ",1),r("div",ge,[r("div",he,[(o(!0),_(D,null,j(a.value,h=>(o(),x(me,{key:h[0],title:h[0],modelValue:h[1],"onUpdate:modelValue":E=>h[1]=E},null,8,["title","modelValue","onUpdate:modelValue"]))),128))]),d(y,{onClick:S},{default:v(()=>[ke]),_:1})])]),_:1},8,["open"]))}};const be={class:"profile-edit-view"},Ce={key:0},$e=$(" Done "),Se={class:"profile-edit-view__task-label"},Ve={class:"profile-edit-view__task-days"},we=$("X"),Te=["onSubmit"],xe=$("Add Task"),De={key:1},je=$(" Done "),Re=$("X"),Ae=["onSubmit"],Ee=$("Add Routine"),Fe={__name:"ProfileEditView",props:{profileId:String},setup(n){const p=n,i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function c(t){const m=[];return t.days.length?t.days.forEach(b=>{m.push(i[b])}):m.push("Every Day"),m.join(", ")}const a=N(),e=a.profiles.find(t=>t.id===parseInt(p.profileId)),l=C(null),s=C(""),S=C(!1),g=C(null);function w(t){g.value=t,S.value=!0}function h(){S.value=!1}function E(t){l.value=t}function M(){l&&s.value.trim()&&(a.addTask(e,l.value,s.value.trim()),s.value="")}function z(t,m){a.deleteTask(e,t,m)}const R=C("");function P(){R.value.trim()&&(a.addRoutine(e,R.value.trim()),R.value="")}function W(t){window.confirm(`Are you sure you want to delete the ${t.name} routine?`)&&a.deleteRoutine(e,t)}function X(t){a.selectCheck(e,t)}function G(t){a.selectColour(e,t)}function H(t){a.selectAvatar(e,t)}function J(t){e.routines=O(e.routines,t),a.saveRoutines()}function K(t){l.value.tasks=O(l.value.tasks,t),a.saveRoutines()}function O(t,m){const{removedIndex:b,addedIndex:T,payload:u}=m;if(b===null&&T===null)return t;const V=[...t];let B=u;return b!==null&&(B=V.splice(b,1)[0]),T!==null&&V.splice(T,0,B),V}return(t,m)=>{var b,T;return o(),_("div",be,[l.value?(o(),_("div",Ce,[r("h1",null," Editing "+k((b=f(e))==null?void 0:b.name)+"'s "+k(l.value.name)+" Routine ",1),d(y,{to:"/"},{default:v(()=>[$e]),_:1}),d(f(q),{class:"profile-edit-view__item-list",orientation:"vertical","drag-begin-delay":200,onDrop:K},{default:v(()=>[(o(!0),_(D,null,j(l.value.tasks,u=>(o(),x(f(I),{key:u.id,class:"profile-edit-view__item"},{default:v(()=>[d(y,{theme:"flat,white",onClick:V=>w(u)},{default:v(()=>[r("div",Se,k(u.label),1),r("div",Ve,k(c(u)),1)]),_:2},1032,["onClick"]),d(y,{delay:"false",onClick:V=>z(l.value,u)},{default:v(()=>[we]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),r("div",null,[r("form",{novalidate:"",onSubmit:U(M,["prevent"])},[d(F,{modelValue:s.value,"onUpdate:modelValue":m[0]||(m[0]=u=>s.value=u),class:"profile-edit-view__input"},null,8,["modelValue"]),d(y,{delay:"false",type:"submit"},{default:v(()=>[xe]),_:1})],40,Te)]),g.value?(o(),x(ye,{key:0,open:S.value,profile:f(e),routine:l.value,task:g.value,onClose:h},null,8,["open","profile","routine","task"])):ee("",!0)])):(o(),_("div",De,[r("h1",null,"Editing "+k((T=f(e))==null?void 0:T.name),1),d(y,{to:"/"},{default:v(()=>[je]),_:1}),d(f(q),{class:"profile-edit-view__item-list",orientation:"vertical","drag-begin-delay":200,onDrop:J},{default:v(()=>[(o(!0),_(D,null,j(f(e).routines,u=>(o(),x(f(I),{key:u.id,class:"profile-edit-view__item"},{default:v(()=>[d(y,{theme:"flat,white",onClick:V=>E(u)},{default:v(()=>[$(k(u.name),1)]),_:2},1032,["onClick"]),d(y,{delay:"false",onClick:V=>W(u)},{default:v(()=>[Re]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),r("div",null,[r("form",{novalidate:"",onSubmit:U(P,["prevent"])},[d(F,{modelValue:R.value,"onUpdate:modelValue":m[1]||(m[1]=u=>R.value=u),class:"profile-edit-view__input"},null,8,["modelValue"]),d(y,{delay:"false",type:"submit"},{default:v(()=>[Ee]),_:1})],40,Ae)]),d(ce,{selected:f(e).check,onSelect:X},null,8,["selected"]),d(oe,{selected:f(e).colour,onSelect:G},null,8,["selected"]),d(_e,{selected:f(e).avatar,onSelect:H},null,8,["selected"])]))])}}};export{Fe as default};
