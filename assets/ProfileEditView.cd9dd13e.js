import{o as n,b as u,F as x,r as w,d,n as W,p as j,g as $,c as R,e as f,v as X,j as O,t as k,u as B,h as q,w as h,f as v,_ as C,a as D,q as G,x as H}from"./index.1644ee3a.js";import{C as J,_ as K,D as Q}from"./vue3-smooth-dnd.esm.ff9b03f5.js";import{V as Y,_ as Z}from"./VDialog.dc15bf32.js";import"./_commonjsHelpers.4e997714.js";const ee={class:"colour-select"},te=["onClick"],ae={__name:"ColourSelect",props:{selected:{required:!0}},emits:["select"],setup(o,{emit:m}){const i=["#ace9dd","#b5efcd","#b7dbf4","#ddc5e7","#b9bfc7","#faeca7","#f2ceab","#f8c2ba"];function c(a){m("select",a)}return(a,e)=>(n(),u("div",ee,[(n(),u(x,null,w(i,s=>d("div",{key:s,class:j(["colour-select__frame no-highlights",{"is-selected":s===o.selected}]),onClick:l=>c(s)},[d("div",{class:"colour-select__colour",style:W(`background: ${s}`)},null,4)],10,te)),64))]))}};const se={class:"check-select"},le=["onClick"],ne={__name:"CheckSelect",props:{selected:{required:!0}},emits:["select"],setup(o,{emit:m}){const i="/routine/",c=$(["check-1.json","check-2.json","check-3.json","check-4.json","check-5.json","check-6.json","check-7.json","check-8.json","check-9.json","check-10.json","check-11.json"].map(e=>({img:e,src:`${i}checks/${e}`,loop:1})));function a(e){e.loop+=1,m("select",e.img)}return(e,s)=>(n(),u("div",se,[(n(!0),u(x,null,w(c.value,l=>(n(),u("div",{class:j(["check-select__frame no-highlights",{"is-selected":o.selected===l.img}]),key:l.img,onClick:b=>a(l)},[(n(),R(f(Y),{class:"check-select__check",key:`${l.img}-${l.loop}`,animationLink:l.src,height:80,width:80,loop:!1},null,8,["animationLink"]))],10,le))),128))]))}};const oe={class:"avatar-select"},ie=["onClick"],ce=["src"],ue={__name:"AvatarSelect",props:{selected:{required:!0}},emits:["select"],setup(o,{emit:m}){const i="/routine/",c=["avatar-1.svg","avatar-2.svg","avatar-3.svg","avatar-4.svg","avatar-5.png","avatar-6.png","avatar-7.svg","avatar-8.svg","avatar-9.svg","avatar-10.svg","avatar-11.svg","avatar-12.svg","avatar-13.svg","avatar-14.svg","avatar-15.png"].map(e=>({img:e,src:`${i}avatars/${e}`}));function a(e){m("select",e.img)}return(e,s)=>(n(),u("div",oe,[(n(!0),u(x,null,w(f(c),l=>(n(),u("div",{class:j(["avatar-select__frame no-highlights",{"is-selected":o.selected===l.img}]),key:l.img,onClick:b=>a(l)},[d("img",{class:"avatar-select__avatar",src:l.src},null,8,ce)],10,ie))),128))]))}};const de=["aria-checked","aria-disabled","aria-label","aria-readonly"],re={class:"m-toggle__label"},_e={__name:"VToggle",props:{activeColor:{type:String,default:"#9FD6AE"},disabled:{type:Boolean,default:!1},title:{type:String,required:!0},modelValue:{type:Boolean,default:!1}},emits:["toggle","update:modelValue"],setup(o,{emit:m}){const i=o;X(e=>({"7b672efa":o.activeColor}));const c=$(i.modelValue);O(()=>i.modelValue,e=>{c.value=e});function a(){i.disabled||(c.value=!c.value,m("update:modelValue",c.value))}return(e,s)=>(n(),u("section",{class:j([{"m-toggle--is-disabled":o.disabled},"m-toggle"]),onClick:a},[d("span",{"aria-checked":c.value,"aria-disabled":o.disabled,"aria-label":o.title,"aria-readonly":o.disabled,class:j(["m-toggle__content",{"m-toggle__content--active":c.value}]),role:"checkbox"},null,10,de),d("label",re,k(o.title),1)],2))}};const ve={class:"task-options-dialog__title"},fe={class:"task-options-dialog__content"},me={class:"task-options-dialog__toggle-list"},pe=D(" Save "),ge={__name:"TaskOptionsDialog",props:{open:Boolean,profile:Object,routine:Object,task:Object},emits:["close"],setup(o,{emit:m}){const i=o,c=B(),a=$([["Sunday",!1],["Monday",!1],["Tuesday",!1],["Wednesday",!1],["Thursday",!1],["Friday",!1],["Saturday",!1]]),e=q(()=>{const p=[];return a.value.forEach((S,g)=>{S[1]&&p.push(g)}),p});O(()=>i.open,p=>{p&&s()}),s();function s(){const p=!i.task.days.length;a.value.forEach((S,g)=>{S[1]=p||i.task.days.includes(g)})}function l(){m("close")}function b(){setTimeout(()=>{e.value.length===7?i.task.days=[]:i.task.days=e.value,c.saveRoutines(),l()},300)}return(p,S)=>(n(),R(Z,{class:"task-options-dialog",open:i.open,onClose:l},{default:h(()=>[d("div",ve,k(o.task.label)+" in "+k(o.profile.name)+"'s "+k(o.routine.name)+" Routine ",1),d("div",fe,[d("div",me,[(n(!0),u(x,null,w(a.value,g=>(n(),R(_e,{key:g[0],title:g[0],modelValue:g[1],"onUpdate:modelValue":E=>g[1]=E},null,8,["title","modelValue","onUpdate:modelValue"]))),128))]),v(C,{onClick:b},{default:h(()=>[pe]),_:1})])]),_:1},8,["open"]))}};const he={class:"profile-edit-view"},ke={key:0},ye=D(" Done "),be={class:"profile-edit-view__task-label"},Ce={class:"profile-edit-view__task-days"},$e=D("X"),Se=["onSubmit"],Ve=D("Add Task"),Te={key:1},xe=D(" Done "),we={class:"profile-edit-view__item-list"},Ae={__name:"ProfileEditView",props:{profileId:String},setup(o){const m=o,i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function c(t){const _=[];return t.days.length?t.days.forEach(y=>{_.push(i[y])}):_.push("Every Day"),_.join(", ")}const a=B(),e=a.profiles.find(t=>t.id===parseInt(m.profileId)),s=$(null),l=$(""),b=$(!1),p=$(null),S=q(()=>{const t=s.value&&a.routines.find(_=>_.id===s.value.id);return t==null?void 0:t.name});function g(t){p.value=t,b.value=!0}function E(){b.value=!1}function F(t){s.value=e.routines.find(_=>_.id===t.id)}function I(){s&&l.value.trim()&&(a.addTask(e,s.value,l.value.trim()),l.value="")}function N(t){a.deleteTask(e,s.value,t)}function U(t){e.check=t,a.saveRoutines()}function L(t){e.colour=t,a.saveRoutines()}function M(t){e.avatar=t,a.saveRoutines()}function z(t){s.value.tasks=P(s.value.tasks,t),a.saveRoutines()}function P(t,_){const{removedIndex:y,addedIndex:V,payload:r}=_;if(y===null&&V===null)return t;const T=[...t];let A=r;return y!==null&&(A=T.splice(y,1)[0]),V!==null&&T.splice(V,0,A),T}return(t,_)=>{var y,V;return n(),u("div",he,[s.value?(n(),u("div",ke,[d("h1",null," Editing "+k((y=f(e))==null?void 0:y.name)+"'s "+k(f(S))+" Routine ",1),v(C,{to:"/"},{default:h(()=>[ye]),_:1}),v(f(J),{class:"profile-edit-view__item-list",orientation:"vertical","drag-begin-delay":200,onDrop:z},{default:h(()=>[(n(!0),u(x,null,w(s.value.tasks,r=>(n(),R(f(Q),{key:r.id,class:"profile-edit-view__item"},{default:h(()=>[v(C,{theme:"flat,white",onClick:T=>g(r)},{default:h(()=>[d("div",be,k(r.name),1),d("div",Ce,k(c(r)),1)]),_:2},1032,["onClick"]),v(C,{delay:"false",onClick:T=>N(r)},{default:h(()=>[$e]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),d("div",null,[d("form",{novalidate:"",onSubmit:G(I,["prevent"])},[v(K,{modelValue:l.value,"onUpdate:modelValue":_[0]||(_[0]=r=>l.value=r),class:"profile-edit-view__input"},null,8,["modelValue"]),v(C,{delay:"false",type:"submit"},{default:h(()=>[Ve]),_:1})],40,Se)]),p.value?(n(),R(ge,{key:0,open:b.value,profile:f(e),routine:s.value,task:p.value,onClose:E},null,8,["open","profile","routine","task"])):H("",!0)])):(n(),u("div",Te,[d("h1",null,"Editing "+k((V=f(e))==null?void 0:V.name),1),v(C,{to:"/"},{default:h(()=>[xe]),_:1}),d("div",we,[(n(!0),u(x,null,w(f(a).routines,r=>(n(),u("div",{key:r.id,class:"profile-edit-view__item"},[v(C,{theme:"flat,white",onClick:T=>F(r)},{default:h(()=>[D(k(r.name),1)]),_:2},1032,["onClick"])]))),128))]),v(ne,{selected:f(e).check,onSelect:U},null,8,["selected"]),v(ae,{selected:f(e).colour,onSelect:L},null,8,["selected"]),v(ue,{selected:f(e).avatar,onSelect:M},null,8,["selected"])]))])}}};export{Ae as default};
