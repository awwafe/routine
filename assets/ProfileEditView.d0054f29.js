import{o as n,d as r,F as x,r as w,e as u,n as W,p as j,h as $,c as R,f as v,v as X,j as O,t as k,u as B,b as q,w as h,g as _,_ as C,a as D,q as G,x as H}from"./index.f494b8e5.js";import{C as J,_ as K,D as Q}from"./vue3-smooth-dnd.esm.294f5b4b.js";import{V as Y,_ as Z}from"./VDialog.46a26b83.js";import"./_commonjsHelpers.4e997714.js";const ee={class:"colour-select"},te=["onClick"],ae={__name:"ColourSelect",props:{selected:{required:!0}},emits:["select"],setup(o,{emit:f}){const i=["#ace9dd","#b5efcd","#b7dbf4","#ddc5e7","#b9bfc7","#faeca7","#f2ceab","#f8c2ba"];function c(s){f("select",s)}return(s,e)=>(n(),r("div",ee,[(n(),r(x,null,w(i,a=>u("div",{key:a,class:j(["colour-select__frame no-highlights",{"is-selected":a===o.selected}]),onClick:l=>c(a)},[u("div",{class:"colour-select__colour",style:W(`background: ${a}`)},null,4)],10,te)),64))]))}};const se={class:"check-select"},le=["onClick"],ne={__name:"CheckSelect",props:{selected:{required:!0}},emits:["select"],setup(o,{emit:f}){const i="/routine/",c=$(["check-1.json","check-2.json","check-3.json","check-4.json","check-5.json","check-6.json","check-7.json","check-8.json","check-9.json","check-10.json","check-11.json"].map(e=>({img:e,src:`${i}checks/${e}`,loop:1})));function s(e){e.loop+=1,f("select",e.img)}return(e,a)=>(n(),r("div",se,[(n(!0),r(x,null,w(c.value,l=>(n(),r("div",{class:j(["check-select__frame no-highlights",{"is-selected":o.selected===l.img}]),key:l.img,onClick:b=>s(l)},[(n(),R(v(Y),{class:"check-select__check",key:`${l.img}-${l.loop}`,animationLink:l.src,height:80,width:80,loop:!1},null,8,["animationLink"]))],10,le))),128))]))}};const oe={class:"avatar-select"},ie=["onClick"],ce=["src"],re={__name:"AvatarSelect",props:{selected:{required:!0}},emits:["select"],setup(o,{emit:f}){const i="/routine/",c=["avatar-1.svg","avatar-2.svg","avatar-3.svg","avatar-4.svg","avatar-5.png","avatar-6.png","avatar-7.svg","avatar-8.svg","avatar-9.svg","avatar-10.svg","avatar-11.svg","avatar-12.svg","avatar-13.svg","avatar-14.svg","avatar-15.png"].map(e=>({img:e,src:`${i}avatars/${e}`}));function s(e){f("select",e.img)}return(e,a)=>(n(),r("div",oe,[(n(!0),r(x,null,w(v(c),l=>(n(),r("div",{class:j(["avatar-select__frame no-highlights",{"is-selected":o.selected===l.img}]),key:l.img,onClick:b=>s(l)},[u("img",{class:"avatar-select__avatar",src:l.src},null,8,ce)],10,ie))),128))]))}};const ue=["aria-checked","aria-disabled","aria-label","aria-readonly"],de={class:"m-toggle__label"},_e={__name:"VToggle",props:{activeColor:{type:String,default:"#9FD6AE"},disabled:{type:Boolean,default:!1},title:{type:String,required:!0},modelValue:{type:Boolean,default:!1}},emits:["toggle","update:modelValue"],setup(o,{emit:f}){const i=o;X(e=>({"7b672efa":o.activeColor}));const c=$(i.modelValue);O(()=>i.modelValue,e=>{c.value=e});function s(){i.disabled||(c.value=!c.value,f("update:modelValue",c.value))}return(e,a)=>(n(),r("section",{class:j([{"m-toggle--is-disabled":o.disabled},"m-toggle"]),onClick:s},[u("span",{"aria-checked":c.value,"aria-disabled":o.disabled,"aria-label":o.title,"aria-readonly":o.disabled,class:j(["m-toggle__content",{"m-toggle__content--active":c.value}]),role:"checkbox"},null,10,ue),u("label",de,k(o.title),1)],2))}};const ve={class:"task-options-dialog__title"},fe={class:"task-options-dialog__content"},me={class:"task-options-dialog__toggle-list"},pe=D(" Save "),ge={__name:"TaskOptionsDialog",props:{open:Boolean,profile:Object,routine:Object,task:Object},emits:["close"],setup(o,{emit:f}){const i=o,c=B(),s=$([["Sunday",!1],["Monday",!1],["Tuesday",!1],["Wednesday",!1],["Thursday",!1],["Friday",!1],["Saturday",!1]]),e=q(()=>{const m=[];return s.value.forEach((S,p)=>{S[1]&&m.push(p)}),m});O(()=>i.open,m=>{m&&a()}),a();function a(){const m=!i.task.days.length;s.value.forEach((S,p)=>{S[1]=m||i.task.days.includes(p)})}function l(){f("close")}function b(){setTimeout(()=>{e.value.length===7?i.task.days=[]:i.task.days=e.value,c.saveRoutines(),l()},300)}return(m,S)=>(n(),R(Z,{class:"task-options-dialog",open:i.open,onClose:l},{default:h(()=>[u("div",ve,k(o.task.label)+" in "+k(o.profile.name)+"'s "+k(o.routine.name)+" Routine ",1),u("div",fe,[u("div",me,[(n(!0),r(x,null,w(s.value,p=>(n(),R(_e,{key:p[0],title:p[0],modelValue:p[1],"onUpdate:modelValue":E=>p[1]=E},null,8,["title","modelValue","onUpdate:modelValue"]))),128))]),_(C,{onClick:b},{default:h(()=>[pe]),_:1})])]),_:1},8,["open"]))}};const he={class:"profile-edit-view"},ke={key:0},ye=D(" Done "),be={class:"profile-edit-view__task-label"},Ce={class:"profile-edit-view__task-days"},$e=D("X"),Se=["onSubmit"],Ve=D("Add Task"),Te={key:1},xe=D(" Done "),we={class:"profile-edit-view__item-list"},Ae={__name:"ProfileEditView",props:{profileId:String},setup(o){const f=o,i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function c(t){const g=[];return t.days.length?t.days.forEach(y=>{g.push(i[y])}):g.push("Every Day"),g.join(", ")}const s=B(),e=s.profiles.find(t=>t.id===parseInt(f.profileId)),a=$(null),l=$(""),b=$(!1),m=$(null),S=q(()=>{const t=a.value&&e.routines.find(g=>g.id===a.value.id);return t?t.tasks:[]});function p(t){m.value=t,b.value=!0}function E(){b.value=!1}function F(t){a.value=t}function I(){a&&l.value.trim()&&(s.addTask(e,a.value,l.value.trim()),l.value="")}function U(t){s.deleteTask(e,a.value,t)}function L(t){e.check=t,s.saveRoutines()}function N(t){e.colour=t,s.saveRoutines()}function M(t){e.avatar=t,s.saveRoutines()}function z(t){a.value.tasks=P(a.value.tasks,t),s.saveRoutines()}function P(t,g){const{removedIndex:y,addedIndex:V,payload:d}=g;if(y===null&&V===null)return t;const T=[...t];let A=d;return y!==null&&(A=T.splice(y,1)[0]),V!==null&&T.splice(V,0,A),T}return(t,g)=>{var y,V;return n(),r("div",he,[a.value?(n(),r("div",ke,[u("h1",null," Editing "+k((y=v(e))==null?void 0:y.name)+"'s "+k(a.value.name)+" Routine ",1),_(C,{to:"/"},{default:h(()=>[ye]),_:1}),_(v(J),{class:"profile-edit-view__item-list",orientation:"vertical","drag-begin-delay":200,onDrop:z},{default:h(()=>[(n(!0),r(x,null,w(v(S),d=>(n(),R(v(Q),{key:d.id,class:"profile-edit-view__item"},{default:h(()=>[_(C,{theme:"flat,white",onClick:T=>p(d)},{default:h(()=>[u("div",be,k(d.name),1),u("div",Ce,k(c(d)),1)]),_:2},1032,["onClick"]),_(C,{delay:"false",onClick:T=>U(d)},{default:h(()=>[$e]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),u("div",null,[u("form",{novalidate:"",onSubmit:G(I,["prevent"])},[_(K,{modelValue:l.value,"onUpdate:modelValue":g[0]||(g[0]=d=>l.value=d),class:"profile-edit-view__input"},null,8,["modelValue"]),_(C,{delay:"false",type:"submit"},{default:h(()=>[Ve]),_:1})],40,Se)]),m.value?(n(),R(ge,{key:0,open:b.value,profile:v(e),routine:a.value,task:m.value,onClose:E},null,8,["open","profile","routine","task"])):H("",!0)])):(n(),r("div",Te,[u("h1",null,"Editing "+k((V=v(e))==null?void 0:V.name),1),_(C,{to:"/"},{default:h(()=>[xe]),_:1}),u("div",we,[(n(!0),r(x,null,w(v(s).routines,d=>(n(),r("div",{key:d.id,class:"profile-edit-view__item"},[_(C,{theme:"flat,white",onClick:T=>F(d)},{default:h(()=>[D(k(d.name),1)]),_:2},1032,["onClick"])]))),128))]),_(ne,{selected:v(e).check,onSelect:L},null,8,["selected"]),_(ae,{selected:v(e).colour,onSelect:N},null,8,["selected"]),_(re,{selected:v(e).avatar,onSelect:M},null,8,["selected"])]))])}}};export{Ae as default};
