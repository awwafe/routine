import{u as O,b as I,h as y,o,d as c,e as a,t as _,f as r,g as i,w as l,_ as m,F as g,r as D,c as C,v as M,q as U,a as h}from"./index.48c07923.js";import{D as j,C as q,_ as L}from"./vue3-smooth-dnd.esm.538ecb82.js";import{_ as P}from"./TaskOptionsDialog.39ca4f11.js";import"./_commonjsHelpers.4e997714.js";import"./VDialog.6e2f9965.js";const W={class:"routine-edit-view"},X=h(" Done "),z={class:"routine-edit-view__lists"},G={class:"routine-edit-view__task-label"},H={class:"routine-edit-view__task-days"},J=h("X"),K=["onSubmit"],Q=h("Add Task"),se={__name:"RoutineEditView",props:{routineId:String},setup(V){const b=V,u=O(),d=u.routines.find(e=>e.id===parseInt(b.routineId)),x=I(()=>u.profiles.map(e=>{const n=e.routines.find(t=>t.id===d.id);return{id:e.id,name:e.name,profile:e,routine:n||{tasks:[]},newTask:""}})),S=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function E(e){const n=[];return e.days.length?e.days.forEach(t=>{n.push(S[t])}):n.push("Every Day"),n.join(", ")}const f=y(!1),w=y(null),v=y(null);function $(e,n){w.value=e,v.value=n,f.value=!0}function B(){f.value=!1}function N(e){e.newTask.trim()&&(u.addTask(e.profile,d,e.newTask.trim()),e.newTask="")}function R(e,n){u.deleteTask(e.profile,d,n)}function A(e,n){e.routine.tasks=F(e.routine.tasks,n),u.saveRoutines()}function F(e,n){const{removedIndex:t,addedIndex:s,payload:k}=n;if(t===null&&s===null)return e;const p=[...e];let T=k;return t!==null&&(T=p.splice(t,1)[0]),s!==null&&p.splice(s,0,T),p}return(e,n)=>(o(),c("div",W,[a("h1",null,"Editing "+_(r(d).name)+" Routine",1),i(m,{to:"/"},{default:l(()=>[X]),_:1}),a("div",z,[a("table",null,[a("tr",null,[(o(!0),c(g,null,D(r(x),t=>(o(),c("td",{key:t.id},[a("h2",null,_(t.name),1),i(r(q),{class:"routine-edit-view__item-list",orientation:"vertical","drag-begin-delay":200,onDrop:s=>A(t,s)},{default:l(()=>[(o(!0),c(g,null,D(t.routine.tasks,s=>(o(),C(r(j),{key:s.id,class:"routine-edit-view__item"},{default:l(()=>[i(m,{theme:"flat,white",onClick:k=>$(t,s)},{default:l(()=>[a("div",G,_(s.name),1),a("div",H,_(E(s)),1)]),_:2},1032,["onClick"]),i(m,{delay:"false",onClick:k=>R(t,s)},{default:l(()=>[J]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:2},1032,["onDrop"]),a("div",null,[a("form",{novalidate:"",onSubmit:U(s=>N(t),["prevent"])},[i(L,{modelValue:t.newTask,"onUpdate:modelValue":s=>t.newTask=s,class:"routine-edit-view__input"},null,8,["modelValue","onUpdate:modelValue"]),i(m,{delay:"false",type:"submit"},{default:l(()=>[Q]),_:1})],40,K)])]))),128))])])]),v.value?(o(),C(P,{key:0,open:f.value,profile:w.value,routine:r(d),task:v.value,onClose:B},null,8,["open","profile","routine","task"])):M("",!0)]))}};export{se as default};
