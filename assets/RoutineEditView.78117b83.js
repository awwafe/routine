import{l as M,r as T,m as j,o as _,c as h,a,n as A,t as k,u as D,p as E,g as w,w as p,f as O,F as R,b as c,_ as g,q,h as b,d as $,e as P,s as W}from"./index.8f092382.js";import{D as X,C as z,_ as F}from"./vue3-smooth-dnd.esm.ca000b88.js";const G=["aria-checked","aria-disabled","aria-label","aria-readonly"],H={class:"m-toggle__label"},J={__name:"VToggle",props:{activeColor:{type:String,default:"#9FD6AE"},disabled:{type:Boolean,default:!1},title:{type:String,required:!0},modelValue:{type:Boolean,default:!1}},emits:["toggle","update:modelValue"],setup(e,{emit:o}){const t=e;M(s=>({"7b672efa":e.activeColor}));const n=T(t.modelValue);j(()=>t.modelValue,s=>{n.value=s});function y(){t.disabled||(n.value=!n.value,o("update:modelValue",n.value))}return(s,r)=>(_(),h("section",{class:A([{"m-toggle--is-disabled":e.disabled},"m-toggle"]),onClick:y},[a("span",{"aria-checked":n.value,"aria-disabled":e.disabled,"aria-label":e.title,"aria-readonly":e.disabled,class:A(["m-toggle__content",{"m-toggle__content--active":n.value}]),role:"checkbox"},null,10,G),a("label",H,k(e.title),1)],2))}};const K={class:"task-options-dialog__title"},Q={class:"task-options-dialog__content"},Y={class:"task-options-dialog__toggle-list"},Z=b(" Save "),ee={__name:"TaskOptionsDialog",props:{open:Boolean,profile:Object,routine:Object,task:Object},emits:["close"],setup(e,{emit:o}){const t=e,n=D(),y=T([["Sunday",!1],["Monday",!1],["Tuesday",!1],["Wednesday",!1],["Thursday",!1],["Friday",!1],["Saturday",!1]]),s=E(()=>{const l=[];return y.value.forEach((V,m)=>{V[1]&&l.push(m)}),l});j(()=>t.open,l=>{l&&r()}),r();function r(){const l=!t.task.days.length;y.value.forEach((V,m)=>{V[1]=l||t.task.days.includes(m)})}function d(){o("close")}function f(){setTimeout(()=>{s.value.length===7?t.task.days=[]:t.task.days=s.value,n.saveRoutines(),d()},300)}return(l,V)=>(_(),w(q,{class:"task-options-dialog",open:t.open,onClose:d},{default:p(()=>[a("div",K,k(e.task.name)+" in "+k(e.profile.name)+"'s "+k(e.routine.name)+" Routine ",1),a("div",Q,[a("div",Y,[(_(!0),h(R,null,O(y.value,m=>(_(),w(J,{key:m[0],title:m[0],modelValue:m[1],"onUpdate:modelValue":S=>m[1]=S},null,8,["title","modelValue","onUpdate:modelValue"]))),128))]),c(g,{onClick:f},{default:p(()=>[Z]),_:1})])]),_:1},8,["open"]))}};const te={class:"edit-task-list"},ae=b("X"),se={class:"edit-task-list__task-label"},le={class:"edit-task-list__task-days"},oe=b("X"),ne=["onSubmit"],ie=b("Add Task"),ue={__name:"EditTaskList",props:{profile:Object,routine:Object},setup(e){const o=e,t=D(),n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function y(i){const v=[];return i.days.length?i.days.forEach(u=>{v.push(n[u])}):v.push("Every Day"),v.join(", ")}const s=E(()=>o.profile.routines.find(v=>v.id===o.routine.id)||{tasks:[]}),r=T(""),d=T(!1),f=T(null);function l(i){f.value=i,d.value=!0}function V(){d.value=!1}function m(){r.value.trim()&&(t.addTask(o.profile,o.routine,r.value.trim()),r.value="")}function S(i){t.deleteTask(o.profile,o.routine,i)}function N(){window.confirm(`Are you sure you want to delete '${o.profile.name}' from all routines?`)&&t.deletePerson(o.profile)}function I(i){s.value.tasks=U(s.value.tasks,i),t.saveRoutines()}function U(i,v){const{removedIndex:u,addedIndex:C,payload:L}=v;if(u===null&&C===null)return i;const x=[...i];let B=L;return u!==null&&(B=x.splice(u,1)[0]),C!==null&&x.splice(C,0,B),x}return(i,v)=>(_(),h("div",te,[a("h2",null,[b(k(e.profile.name)+" ",1),c(g,{delay:"false",onClick:N},{default:p(()=>[ae]),_:1})]),c($(z),{class:"edit-task-list__item-list",orientation:"vertical","drag-begin-delay":200,onDrop:I},{default:p(()=>[(_(!0),h(R,null,O($(s).tasks,u=>(_(),w($(X),{key:u.id,class:"edit-task-list__item"},{default:p(()=>[c(g,{theme:"flat,white",onClick:C=>l(u)},{default:p(()=>[a("div",se,k(u.name),1),a("div",le,k(y(u)),1)]),_:2},1032,["onClick"]),c(g,{delay:"false",onClick:C=>S(u)},{default:p(()=>[oe]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),a("div",null,[a("form",{novalidate:"",onSubmit:P(m,["prevent"])},[c(F,{modelValue:r.value,"onUpdate:modelValue":v[0]||(v[0]=u=>r.value=u),class:"routine-edit-view__input"},null,8,["modelValue"]),c(g,{delay:"false",type:"submit"},{default:p(()=>[ie]),_:1})],40,ne)]),f.value?(_(),w(ee,{key:0,open:d.value,profile:e.profile,routine:e.routine,task:f.value,onClose:V},null,8,["open","profile","routine","task"])):W("",!0)]))}};const de={class:"routine-edit-view"},re={class:"routine-edit-view__page-layer"},ce=b(" < Back "),_e={style:{"margin-bottom":"40px"}},fe=["onSubmit"],me=b("Add Person"),ve={class:"routine-edit-view__lists"},ke={__name:"RoutineEditView",props:{routineId:String},setup(e){const o=e,t=D(),n=t.routines.find(d=>d.id===parseInt(o.routineId)),y=E(()=>t.profiles.map(d=>{const f=d.routines.find(l=>l.id===n.id);return{profile:d,routine:f||{tasks:[]}}})),s=T("");function r(){s.value.trim()&&(t.addPerson(s.value.trim()),s.value="")}return(d,f)=>(_(),h("div",de,[a("div",re,[c(g,{to:"/",theme:"flat,white"},{default:p(()=>[ce]),_:1})]),a("h1",null,"Editing "+k($(n).name)+" Routine",1),a("div",_e,[a("form",{novalidate:"",onSubmit:P(r,["prevent"])},[c(F,{modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=l=>s.value=l),class:"routine-edit-view__input",placeholder:"Name"},null,8,["modelValue"]),c(g,{delay:"false",type:"submit"},{default:p(()=>[me]),_:1})],40,fe)]),a("div",ve,[a("table",null,[a("tr",null,[(_(!0),h(R,null,O($(y),l=>(_(),h("td",{key:l.profile.id},[c(ue,{profile:l.profile,routine:$(n)},null,8,["profile","routine"])]))),128))])])])]))}};export{ke as default};
