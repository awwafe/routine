import{l as M,r as T,m as j,o as _,c as h,a as l,n as A,t as k,u as D,p as E,g as C,w as p,f as O,F as R,b as c,_ as g,q,h as b,d as $,e as P,s as W}from"./index.dc398ecd.js";import{D as X,C as z,_ as F}from"./vue3-smooth-dnd.esm.ea5963ee.js";const G=["aria-checked","aria-disabled","aria-label","aria-readonly"],H={class:"m-toggle__label"},J={__name:"VToggle",props:{activeColor:{type:String,default:"#9FD6AE"},disabled:{type:Boolean,default:!1},title:{type:String,required:!0},modelValue:{type:Boolean,default:!1}},emits:["toggle","update:modelValue"],setup(e,{emit:o}){const t=e;M(a=>({"7b672efa":e.activeColor}));const n=T(t.modelValue);j(()=>t.modelValue,a=>{n.value=a});function y(){t.disabled||(n.value=!n.value,o("update:modelValue",n.value))}return(a,r)=>(_(),h("section",{class:A([{"m-toggle--is-disabled":e.disabled},"m-toggle"]),onClick:y},[l("span",{"aria-checked":n.value,"aria-disabled":e.disabled,"aria-label":e.title,"aria-readonly":e.disabled,class:A(["m-toggle__content",{"m-toggle__content--active":n.value}]),role:"checkbox"},null,10,G),l("label",H,k(e.title),1)],2))}};const K={class:"task-options-dialog__title"},Q={class:"task-options-dialog__content"},Y={class:"task-options-dialog__toggle-list"},Z=b(" Save "),ee={__name:"TaskOptionsDialog",props:{open:Boolean,profile:Object,routine:Object,task:Object},emits:["close"],setup(e,{emit:o}){const t=e,n=D(),y=T([["Sunday",!1],["Monday",!1],["Tuesday",!1],["Wednesday",!1],["Thursday",!1],["Friday",!1],["Saturday",!1]]),a=E(()=>{const s=[];return y.value.forEach((V,v)=>{V[1]&&s.push(v)}),s});j(()=>t.open,s=>{s&&r()}),r();function r(){const s=!t.task.days.length;y.value.forEach((V,v)=>{V[1]=s||t.task.days.includes(v)})}function u(){o("close")}function f(){setTimeout(()=>{a.value.length===7?t.task.days=[]:t.task.days=a.value,n.saveRoutines(),u()},300)}return(s,V)=>(_(),C(q,{class:"task-options-dialog",open:t.open,onClose:u},{default:p(()=>[l("div",K,k(e.task.name)+" in "+k(e.profile.name)+"'s "+k(e.routine.name)+" Routine ",1),l("div",Q,[l("div",Y,[(_(!0),h(R,null,O(y.value,v=>(_(),C(J,{key:v[0],title:v[0],modelValue:v[1],"onUpdate:modelValue":S=>v[1]=S},null,8,["title","modelValue","onUpdate:modelValue"]))),128))]),c(g,{onClick:f},{default:p(()=>[Z]),_:1})])]),_:1},8,["open"]))}};const te={class:"edit-task-list"},ae=b("X"),se={class:"edit-task-list__task-label"},le={class:"edit-task-list__task-days"},oe=b("X"),ne=["onSubmit"],ie=b("Add Task"),de={__name:"EditTaskList",props:{profile:Object,routine:Object},setup(e){const o=e,t=D(),n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function y(i){const m=[];return i.days.length?i.days.forEach(d=>{m.push(n[d])}):m.push("Every Day"),m.join(", ")}const a=E(()=>o.profile.routines.find(m=>m.id===o.routine.id)||{tasks:[]}),r=T(""),u=T(!1),f=T(null);function s(i){f.value=i,u.value=!0}function V(){u.value=!1}function v(){r.value.trim()&&(t.addTask(o.profile,o.routine,r.value.trim()),r.value="")}function S(i){t.deleteTask(o.profile,o.routine,i)}function N(){window.confirm(`Are you sure you want to delete '${o.profile.name}' from all routines?`)&&t.deletePerson(o.profile)}function I(i){a.value.tasks=U(a.value.tasks,i),t.saveRoutines()}function U(i,m){const{removedIndex:d,addedIndex:w,payload:L}=m;if(d===null&&w===null)return i;const x=[...i];let B=L;return d!==null&&(B=x.splice(d,1)[0]),w!==null&&x.splice(w,0,B),x}return(i,m)=>(_(),h("div",te,[l("h2",null,[b(k(e.profile.name)+" ",1),c(g,{delay:"false",onClick:N},{default:p(()=>[ae]),_:1})]),c($(z),{class:"edit-task-list__item-list",orientation:"vertical","drag-begin-delay":200,onDrop:I},{default:p(()=>[(_(!0),h(R,null,O($(a).tasks,d=>(_(),C($(X),{key:d.id,class:"edit-task-list__item"},{default:p(()=>[c(g,{theme:"flat,white",onClick:w=>s(d)},{default:p(()=>[l("div",se,k(d.name),1),l("div",le,k(y(d)),1)]),_:2},1032,["onClick"]),c(g,{delay:"false",onClick:w=>S(d)},{default:p(()=>[oe]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),l("div",null,[l("form",{novalidate:"",onSubmit:P(v,["prevent"])},[c(F,{modelValue:r.value,"onUpdate:modelValue":m[0]||(m[0]=d=>r.value=d),class:"routine-edit-view__input"},null,8,["modelValue"]),c(g,{delay:"false",type:"submit"},{default:p(()=>[ie]),_:1})],40,ne)]),f.value?(_(),C(ee,{key:0,open:u.value,profile:e.profile,routine:e.routine,task:f.value,onClose:V},null,8,["open","profile","routine","task"])):W("",!0)]))}};const ue={class:"routine-edit-view"},re={class:"routine-edit-view__page-layer"},ce=b(" < Back "),_e={style:{"margin-bottom":"40px"}},fe=["onSubmit"],ve=b("Add Person"),me={class:"routine-edit-view__profile-table"},ke={__name:"RoutineEditView",props:{routineId:String},setup(e){const o=e,t=D(),n=t.routines.find(u=>u.id===parseInt(o.routineId)),y=E(()=>t.profiles.map(u=>{const f=u.routines.find(s=>s.id===n.id);return{profile:u,routine:f||{tasks:[]}}})),a=T("");function r(){a.value.trim()&&(t.addPerson(a.value.trim()),a.value="")}return(u,f)=>(_(),h("div",ue,[l("div",re,[c(g,{to:"/",theme:"flat,white"},{default:p(()=>[ce]),_:1})]),l("h1",null,"Editing "+k($(n).name)+" Routine",1),l("div",_e,[l("form",{novalidate:"",onSubmit:P(r,["prevent"])},[c(F,{modelValue:a.value,"onUpdate:modelValue":f[0]||(f[0]=s=>a.value=s),class:"routine-edit-view__input",placeholder:"Name"},null,8,["modelValue"]),c(g,{delay:"false",type:"submit"},{default:p(()=>[ve]),_:1})],40,fe)]),l("div",me,[(_(!0),h(R,null,O($(y),s=>(_(),h("div",{class:"routine-edit-view__profile-table-cell",key:s.profile.id},[c(de,{profile:s.profile,routine:$(n)},null,8,["profile","routine"])]))),128))])]))}};export{ke as default};
