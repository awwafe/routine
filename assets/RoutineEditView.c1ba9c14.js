import{u as x,b as V,h as k,o as u,d as v,e as i,t as y,g as r,w as _,F as $,r as E,c as D,_ as h,f,q as A,v as F,a as w}from"./index.6c8a7ce8.js";import{D as L,C as M,_ as q}from"./vue3-smooth-dnd.esm.df57e660.js";import{_ as U}from"./TaskOptionsDialog.f2cbfc6a.js";import"./_commonjsHelpers.4e997714.js";import"./VDialog.834469f9.js";const W={class:"edit-task-list"},X={class:"edit-task-list__task-label"},z={class:"edit-task-list__task-days"},G=w("X"),H=["onSubmit"],J=w("Add Task"),K={__name:"EditTaskList",props:{profile:Object,routine:Object},setup(d){const o=d,c=x(),p=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function T(e){const s=[];return e.days.length?e.days.forEach(t=>{s.push(p[t])}):s.push("Every Day"),s.join(", ")}const n=V(()=>o.profile.routines.find(s=>s.id===o.routine.id)||{tasks:[]}),a=k(""),l=k(!1);k(null);const g=k(null);function R(e){g.value=e,l.value=!0}function S(){l.value=!1}function O(){a.value.trim()&&(c.addTask(o.profile,o.routine,a.value.trim()),a.value="")}function B(e){c.deleteTask(o.profile,o.routine,e)}function I(e){n.value.tasks=N(n.value.tasks,e),c.saveRoutines()}function N(e,s){const{removedIndex:t,addedIndex:m,payload:j}=s;if(t===null&&m===null)return e;const b=[...e];let C=j;return t!==null&&(C=b.splice(t,1)[0]),m!==null&&b.splice(m,0,C),b}return(e,s)=>(u(),v("div",W,[i("h2",null,y(d.profile.name),1),r(f(M),{class:"edit-task-list__item-list",orientation:"vertical","drag-begin-delay":200,onDrop:I},{default:_(()=>[(u(!0),v($,null,E(f(n).tasks,t=>(u(),D(f(L),{key:t.id,class:"edit-task-list__item"},{default:_(()=>[r(h,{theme:"flat,white",onClick:m=>R(t)},{default:_(()=>[i("div",X,y(t.name),1),i("div",z,y(T(t)),1)]),_:2},1032,["onClick"]),r(h,{delay:"false",onClick:m=>B(t)},{default:_(()=>[G]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),i("div",null,[i("form",{novalidate:"",onSubmit:A(O,["prevent"])},[r(q,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=t=>a.value=t),class:"routine-edit-view__input"},null,8,["modelValue"]),r(h,{delay:"false",type:"submit"},{default:_(()=>[J]),_:1})],40,H)]),g.value?(u(),D(U,{key:0,open:l.value,profile:d.profile,routine:d.routine,task:g.value,onClose:S},null,8,["open","profile","routine","task"])):F("",!0)]))}};const P={class:"routine-edit-view"},Q=w(" Done "),Y={class:"routine-edit-view__lists"},ie={__name:"RoutineEditView",props:{routineId:String},setup(d){const o=d,c=x(),p=c.routines.find(n=>n.id===parseInt(o.routineId)),T=V(()=>c.profiles.map(n=>{const a=n.routines.find(l=>l.id===p.id);return{profile:n,routine:a||{tasks:[]}}}));return(n,a)=>(u(),v("div",P,[i("h1",null,"Editing "+y(f(p).name)+" Routine",1),r(h,{to:"/"},{default:_(()=>[Q]),_:1}),i("div",Y,[i("table",null,[i("tr",null,[(u(!0),v($,null,E(f(T),l=>(u(),v("td",{key:l.profile.id},[r(K,{profile:l.profile,routine:f(p)},null,8,["profile","routine"])]))),128))])])])]))}};export{ie as default};
